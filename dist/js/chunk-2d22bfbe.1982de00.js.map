{"version":3,"sources":["webpack:///./src/components/legal/mediaRecord.vue","webpack:///./src/components/legal/mediaRecord.vue?1293","webpack:///./src/components/legal/mediaRecord.vue?8654"],"names":["class","style","item","active","data-index","index","mediaRecordsObj","PMNId","key","format","value-format","DateTime","type","placeholder","InformationResource","Summary","autosize","LinkUrl","size","doSave","doDelete","doAddFrom","source","PMNRComment","rows","noRecord","savePublicMNRComment","props","columns","Array","default","acitve","Number","Boolean","emits","setup","contex","$api","dataMap","OrderId","EnterpriseId","RecordType","id","report","deleteRecordForm","then","res","code","emit","catch","err","console","log","getPublicMNRComment","orderId","recordType","data","render"],"mappings":"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","file":"js/chunk-2d22bfbe.1982de00.js","sourcesContent":["<template>\r\n<DynamicScrollerItem\r\n\t:item=\"item\"\r\n\t:active=\"active\"\r\n\t:data-index=\"index\">\r\n  <div class=\"pub-form-mod pub-form-civil\">\r\n    <div class=\"pub-form-hd\">\r\n      <h4 class=\"title\">媒体记录</h4>\r\n    </div>\r\n    <div class=\"pub-form-bd\" v-for=\"(item, index) in mediaRecordsObj\" :PMNId=\"item.PMNId\" :key=\"index\">\r\n      <div class=\"pub-form-title\">{{ '媒体记录 ' + (index + 1) }}</div>\r\n      <div class=\"pub-form-item pub-form-border\">\r\n        <div class=\"pub-form-col-2\">\r\n          <span class=\"label\">发布日期</span>\r\n          <div class=\"content\">\r\n            <el-date-picker class=\"w100\" format=\"yyyy年M月d日\" value-format=\"yyyy年M月d日\" v-model=\"item.DateTime\" type=\"date\" placeholder=\"选择日期\"> </el-date-picker>\r\n          </div>\r\n        </div>\r\n        <div class=\"pub-form-col-2\">\r\n          <span class=\"label\">信息来源</span>\r\n          <div class=\"content\">\r\n            <el-input v-model=\"item.InformationResource\" placeholder=\"信息来源\"></el-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"pub-form-col-2 w100\">\r\n          <span class=\"label\">摘要</span>\r\n          <div class=\"content\">\r\n            <el-input v-model=\"item.Summary\" autosize type=\"textarea\" placeholder=\"摘要\"></el-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"pub-form-col-2 w100\">\r\n          <span class=\"label\">链接</span>\r\n          <div class=\"content\">\r\n            <el-input v-model=\"item.LinkUrl\" autosize type=\"textarea\" placeholder=\"链接\"></el-input>\r\n          </div>\r\n        </div>\r\n        <div class=\"btn-box\" style=\"width: 100%\">\r\n          <el-button class=\"pub-button-space pub-save-btn\" size=\"mini\" @click=\"doSave(index, item)\">保存</el-button>\r\n          <el-button class=\"pub-button-space\" size=\"mini\" @click=\"doDelete(index, item.PMNId)\">删除</el-button>\r\n          <span class=\"pub-form-icon add-icon-color el-icon-folder-add position\" @click=\"doAddFrom(index)\"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"pub-form-bd\">\r\n      <div class=\"pub-form-item pub-form-border\">\r\n        <div class=\"pub-form-col-2 w100\">\r\n          <span class=\"label\">备注</span>\r\n          <div class=\"content content-vertical-box\">\r\n            <el-input v-model=\"source.PMNRComment\" autosize type=\"textarea\" :rows=\"2\" placeholder=\"备注\"></el-input>\r\n            <div class=\"inline-box\">\r\n              <el-checkbox v-model=\"noRecord\" style=\"vertical-align: middle\">本次调查未发现该主体涉及有关记录。</el-checkbox>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"pub-form-fd\">\r\n      <el-button class=\"pub-button-space\" type=\"primary\" @click=\"savePublicMNRComment\">保存</el-button>\r\n    </div>\r\n  </div>\r\n</DynamicScrollerItem>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nimport { defineComponent, reactive, toRefs ,onBeforeMount, inject } from 'vue'\r\nexport default defineComponent ({\r\n    props: {\r\n      columns: {\r\n        type: Array,\r\n        default: []\r\n      },\r\n      item: {\r\n        type: Array,\r\n        default: []\r\n      },\r\n      acitve: {\r\n          type: Number,\r\n          default: 0\r\n      },\r\n      index:{\r\n          type: Number,\r\n          default: 0\r\n      },\r\n\r\n      mediaRecordsObj: {  // 接收父组件传过来得数据\r\n          type: Array,\r\n          default: []\r\n      },\r\n      noRecord: {\r\n          type: Boolean,\r\n          default: false\r\n      }\r\n    },\r\n    emits: ['addFormArr', 'deleteFrom'],\r\n\t  setup(props, contex) {\r\n        const $api :any = inject('$api')\r\n        const dataMap = reactive({\r\n          source: {\r\n              OrderId: '202007240017',\r\n              EnterpriseId: '601139478',\r\n              RecordType: '2901',\r\n              PMNRComment: ''\r\n          }\r\n        })\r\n        //删除负面记录\r\n        const doDelete = (index: number, id: string) => {\r\n            if (id != '0') {\r\n            $api.report\r\n                .deleteRecordForm(id)\r\n                .then((res: any) => {\r\n                if (res.code === 200) {\r\n                    // this.$message({\r\n                    // message: '删除成功！',\r\n                    // type: 'success'\r\n                    // });\r\n                    contex.emit('deleteFrom', index)\r\n                } else {\r\n                    // this.$message.error(res.msg);\r\n                }\r\n                })\r\n                .catch((err: any) => {\r\n                console.log(err);\r\n                });\r\n            } else {\r\n                contex.emit('deleteFrom', index)\r\n            }\r\n        }\r\n\r\n        //保存负面记录\r\n        const doSave = (index: number, item: any) => {\r\n            $api.report\r\n            .saveRecordForm(item)\r\n            .then((res: any) => {\r\n                if (res.code === 200) {\r\n                /**\r\n                 * 保存成功后，需要向父级页面传递当前表单Id进行数据更新，由于现在整体未调试完毕，暂挂起\r\n                 */\r\n                // this.$message({\r\n                //     message: '保存成功！',\r\n                //     type: 'success'\r\n                // });\r\n                } else {\r\n                    // this.$message.error(res.msg);\r\n                }\r\n            })\r\n            .catch((err: any) => {\r\n                // this.$message.error('保存失败！');\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        //获取负面记录备注\r\n        const getPublicMNRComment = () => {\r\n            $api.report\r\n            .getPublicMNRComment({\r\n                orderId: '202007240017',\r\n                recordType: '2901'\r\n            })\r\n            .then((res: any) => {\r\n                if (res.code === 200) {\r\n                    dataMap.source = res.data;\r\n                } else {\r\n                // this.$message.error(res.msg);\r\n                }\r\n            });\r\n        }\r\n\r\n        //保存负面记录备注\r\n        const savePublicMNRComment = () => {\r\n            $api.report.savePublicMNRComment(dataMap.source).then((res: any) => {\r\n            if (res.code === 200) {\r\n                // this.$message({\r\n                // message: '保存成功！',\r\n                // type: 'success'\r\n                // });\r\n            } else {\r\n                // this.$message.error(res.msg);\r\n            }\r\n            });\r\n        }\r\n        onBeforeMount(() => {\r\n            // getPublicMNRComment();\r\n\t\t})\r\n\t\treturn {\r\n\t\t\t...toRefs(dataMap),\r\n      doDelete,\r\n      getPublicMNRComment,\r\n      savePublicMNRComment\r\n\t\t}\r\n\t}\r\n})\r\n</script>","\r\nimport { defineComponent, reactive, toRefs ,onBeforeMount, inject } from 'vue'\r\nexport default defineComponent ({\r\n    props: {\r\n      columns: {\r\n        type: Array,\r\n        default: []\r\n      },\r\n      item: {\r\n        type: Array,\r\n        default: []\r\n      },\r\n      acitve: {\r\n          type: Number,\r\n          default: 0\r\n      },\r\n      index:{\r\n          type: Number,\r\n          default: 0\r\n      },\r\n\r\n      mediaRecordsObj: {  // 接收父组件传过来得数据\r\n          type: Array,\r\n          default: []\r\n      },\r\n      noRecord: {\r\n          type: Boolean,\r\n          default: false\r\n      }\r\n    },\r\n    emits: ['addFormArr', 'deleteFrom'],\r\n\t  setup(props, contex) {\r\n        const $api :any = inject('$api')\r\n        const dataMap = reactive({\r\n          source: {\r\n              OrderId: '202007240017',\r\n              EnterpriseId: '601139478',\r\n              RecordType: '2901',\r\n              PMNRComment: ''\r\n          }\r\n        })\r\n        //删除负面记录\r\n        const doDelete = (index: number, id: string) => {\r\n            if (id != '0') {\r\n            $api.report\r\n                .deleteRecordForm(id)\r\n                .then((res: any) => {\r\n                if (res.code === 200) {\r\n                    // this.$message({\r\n                    // message: '删除成功！',\r\n                    // type: 'success'\r\n                    // });\r\n                    contex.emit('deleteFrom', index)\r\n                } else {\r\n                    // this.$message.error(res.msg);\r\n                }\r\n                })\r\n                .catch((err: any) => {\r\n                console.log(err);\r\n                });\r\n            } else {\r\n                contex.emit('deleteFrom', index)\r\n            }\r\n        }\r\n\r\n        //保存负面记录\r\n        const doSave = (index: number, item: any) => {\r\n            $api.report\r\n            .saveRecordForm(item)\r\n            .then((res: any) => {\r\n                if (res.code === 200) {\r\n                /**\r\n                 * 保存成功后，需要向父级页面传递当前表单Id进行数据更新，由于现在整体未调试完毕，暂挂起\r\n                 */\r\n                // this.$message({\r\n                //     message: '保存成功！',\r\n                //     type: 'success'\r\n                // });\r\n                } else {\r\n                    // this.$message.error(res.msg);\r\n                }\r\n            })\r\n            .catch((err: any) => {\r\n                // this.$message.error('保存失败！');\r\n                console.log(err);\r\n            });\r\n        }\r\n\r\n        //获取负面记录备注\r\n        const getPublicMNRComment = () => {\r\n            $api.report\r\n            .getPublicMNRComment({\r\n                orderId: '202007240017',\r\n                recordType: '2901'\r\n            })\r\n            .then((res: any) => {\r\n                if (res.code === 200) {\r\n                    dataMap.source = res.data;\r\n                } else {\r\n                // this.$message.error(res.msg);\r\n                }\r\n            });\r\n        }\r\n\r\n        //保存负面记录备注\r\n        const savePublicMNRComment = () => {\r\n            $api.report.savePublicMNRComment(dataMap.source).then((res: any) => {\r\n            if (res.code === 200) {\r\n                // this.$message({\r\n                // message: '保存成功！',\r\n                // type: 'success'\r\n                // });\r\n            } else {\r\n                // this.$message.error(res.msg);\r\n            }\r\n            });\r\n        }\r\n        onBeforeMount(() => {\r\n            // getPublicMNRComment();\r\n\t\t})\r\n\t\treturn {\r\n\t\t\t...toRefs(dataMap),\r\n      doDelete,\r\n      getPublicMNRComment,\r\n      savePublicMNRComment\r\n\t\t}\r\n\t}\r\n})\r\n","import { render } from \"./mediaRecord.vue?vue&type=template&id=79d72a71\"\nimport script from \"./mediaRecord.vue?vue&type=script&lang=ts\"\nexport * from \"./mediaRecord.vue?vue&type=script&lang=ts\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}