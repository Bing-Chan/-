(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cf0f7ec2"],{1427:function(e,t,a){"use strict";a.r(t);var r=a("7a23"),n=Object(r["kb"])("data-v-44f0f6af");Object(r["K"])("data-v-44f0f6af");var c={class:"searchPanel"},i=Object(r["o"])("span",{style:{"margin-right":"1px",color:"#aaaa"}},"|",-1);Object(r["H"])();var s=n((function(e,t,a,s,o,l){var u=Object(r["Q"])("el-input");return Object(r["hb"])((Object(r["G"])(),Object(r["j"])("div",c,[Object(r["o"])(u,{ref:"searchBox",type:"text",id:"searchBox",modelValue:e.searchInfo,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.searchInfo=t}),onKeyup:Object(r["ib"])(e.getSearchList,["enter"])},{suffix:n((function(){return[Object(r["n"])(Object(r["U"])(e.searchIndex)+"/"+Object(r["U"])(e.searchTotal),1)]})),_:1},8,["modelValue","onKeyup"]),i,Object(r["o"])("i",{class:"el-icon el-icon-arrow-up",onClick:t[2]||(t[2]=function(){return e.searchPrev&&e.searchPrev.apply(e,arguments)}),title:"上一个"}),Object(r["o"])("i",{class:"el-icon el-icon-arrow-down",onClick:t[3]||(t[3]=function(){return e.searchNext&&e.searchNext.apply(e,arguments)}),title:"下一个"}),Object(r["o"])("i",{class:"el-icon el-icon-close",onClick:t[4]||(t[4]=function(){return e.closeSearchBox&&e.closeSearchBox.apply(e,arguments)})})],512)),[[r["db"],e.searchVisibile]])})),o=a("5530"),l=(a("498a"),a("5319"),a("ac1f"),a("159b"),a("d81d"),a("b64b"),a("99af"),a("d3b7"),a("25f0"),a("fb6a"),a("4d63"),a("0613")),u=Object(r["q"])({name:"Search",props:{listItem:{type:Array,default:function(){return[]}},labelList:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=Object(l["useStore"])(),n=Object(r["M"])(),c=Object(r["M"])(""),i=Object(r["L"])({searchVisibile:!1,searchIndex:0,searchTotal:0,searchList:Array(),searchDirection:"down",compositionFlag:!0,sourceListItem:Array()});Object(r["eb"])(e.listItem,(function(e){i.sourceListItem=e,i.searchVisibile&&c.value&&p()})),Object(r["eb"])(c,(function(e){c.value?i.compositionFlag&&p():s()}));var s=function(){c.value="",i.searchTotal=0,i.searchIndex=0,u()},u=function(){var e=document.getElementsByClassName("result");if(e.length>0)for(var t=e.length-1;t>=0;t--){var a=e[t].parentNode,r=a.innerText.trim();a.innerHTML=r.replace(/[\r\n]/g,"")}},f=function(){if(!(i.searchIndex>=i.searchTotal)){i.searchDirection="down";var e=i.searchList[i.searchIndex++].pos;d(e,i.searchList[i.searchIndex-1].item[0].key)}},h=function(){if(!(i.searchIndex<=0)){i.searchDirection="up";var e=i.searchList[--i.searchIndex].pos;d(e,i.searchList[i.searchIndex].item[0].key)}},d=function(e,a){t.emit("update:scrollToItem",e),Object(r["x"])((function(){var t=setTimeout((function(){b(e,a),clearTimeout(t)}),0)}))},p=function(){if(i.searchList=[],i.searchDirection="down",i.sourceListItem=a.state.app.data,i.sourceListItem.forEach((function(t,a){Object.keys(e.labelList).map((function(r){r.indexOf(c.value)>-1&&i.searchList.push({PLRId:t.data["PLRId"],pos:a,item:[{key:"".concat(r,"（").concat(a+1,"）")}],type:"label"}),e.labelList[r].forEach((function(e){e.indexOf(c.value)>-1&&i.searchList.push({PLRId:t.data["PLRId"],pos:a,item:[{key:e}],type:"label"})}))})),Object.keys(t.data).map((function(e){if(t.data[e]instanceof Array)t.data[e].forEach((function(e){Object.keys(e).map((function(r){var n=e[r]?e[r].toString():"";n.indexOf(c.value)>-1&&i.searchList.push({PLRId:t.data["PLRId"],pos:a,item:[{key:e[r]}],type:"value"})}))}));else{var r=t.data[e]?t.data[e].toString():"";r.indexOf(c.value)>-1&&i.searchList.push({PLRId:t.data["PLRId"],pos:a,item:[{key:t.data[e]}],type:"value"})}}))})),i.searchList.length>0&&(i.searchTotal=i.searchList.length,console.log("this.searchIndex:"+i.searchIndex),console.log("this.searchTotal:"+i.searchTotal),i.searchIndex>=0&&i.searchIndex<i.searchTotal)){var t=i.searchList[i.searchIndex++].pos;d(t,i.searchList[i.searchIndex-1].item[0].key)}return!1},b=function(e,t){var a;if(a="up"===i.searchDirection&&i.searchList.length>1&&i.searchIndex<i.searchList.length-1?i.searchIndex+1:"up"===i.searchDirection&&i.searchList.length<=1?i.searchIndex:i.searchIndex-1,i.searchList[a].type&&"label"===i.searchList[a].type)return u(),v(e,t),!1;Object(r["x"])((function(){var a,r=Array.prototype.slice.call(document.querySelectorAll(".vue-recycle-scroller__item-view"));Array.prototype.map.call(r,(function(t){t.children[0].dataset["index"]==e&&(a=t)}));for(var n=Array.prototype.slice.call(a.getElementsByTagName("input")),i=Array.prototype.slice.call(a.getElementsByTagName("textarea")),s=n.concat(i),o=0;o<s.length;o++)if(s[o].value===t||!t){var l=s[o].value,u=l.indexOf(c.value),f=u+c.value.length;if(u>-1){s[o].focus(),s[o].setSelectionRange(u,f);break}}}))},v=function(e,t){var a,r=Array.prototype.slice.call(document.querySelectorAll(".vue-recycle-scroller__item-view"));Array.prototype.map.call(r,(function(t){t.children[0].dataset["index"]==e&&(a=t)}));var n=a.getElementsByClassName("pub-form-title")?a.getElementsByClassName("pub-form-title")[0]:null,i=a.getElementsByClassName("label"),s=new RegExp(c.value+"(?!([^<]+)?>)","ig");if(n&&n.innerHTML===t)return n.innerHTML=n.innerHTML.replace(s,"<span  class='result'>"+c.value+"</span>"),!1;for(var o=0;o<i.length;o++)if(i[o].innerHTML===t)return i[o].innerHTML=i[o].innerHTML.replace(s,"<span  class='result'>"+c.value+"</span>"),!1},m=function(){c.value="",i.searchVisibile=!1,u()};return Object(r["D"])((function(){i.sourceListItem=a.state.app.data;window.addEventListener("keydown",(function(e){var t=e||window.event;return t.metaKey&&70===t.keyCode?(t.returnValue=!1,i.searchVisibile=!i.searchVisibile,i.searchVisibile&&Object(r["x"])((function(){n.value.focus()})),!1):t.ctrlKey&&70===t.keyCode?(t.returnValue=!1,i.searchVisibile=!0,i.searchVisibile&&Object(r["x"])((function(){n.value.focus()})),!1):void 0})),Object(r["x"])((function(){var e=document.getElementById("searchBox");e.addEventListener("compositionstart",(function(e){i.compositionFlag=!1})),e.addEventListener("compositionend",(function(e){i.compositionFlag=!0}))}))})),Object(o["a"])(Object(o["a"])({},Object(r["Y"])(i)),{},{searchRset:s,clearLabelMark:u,searchNext:f,searchPrev:h,jump:d,getSearchList:p,searchHtml:b,labelMark:v,closeSearchBox:m,searchBox:n,searchInfo:c,store:a})}});a("ec53");u.render=s,u.__scopeId="data-v-44f0f6af";t["default"]=u},"25f0":function(e,t,a){"use strict";var r=a("6eeb"),n=a("825a"),c=a("d039"),i=a("ad6d"),s="toString",o=RegExp.prototype,l=o[s],u=c((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(u||f)&&r(RegExp.prototype,s,(function(){var e=n(this),t=String(e.source),a=e.flags,r=String(void 0===a&&e instanceof RegExp&&!("flags"in o)?i.call(e):a);return"/"+t+"/"+r}),{unsafe:!0})},"498a":function(e,t,a){"use strict";var r=a("23e7"),n=a("58a8").trim,c=a("c8d2");r({target:"String",proto:!0,forced:c("trim")},{trim:function(){return n(this)}})},"4d63":function(e,t,a){var r=a("83ab"),n=a("da84"),c=a("94ca"),i=a("7156"),s=a("9bf2").f,o=a("241c").f,l=a("44e7"),u=a("ad6d"),f=a("9f7f"),h=a("6eeb"),d=a("d039"),p=a("69f3").set,b=a("2626"),v=a("b622"),m=v("match"),y=n.RegExp,g=y.prototype,x=/a/g,L=/a/g,O=new y(x)!==x,I=f.UNSUPPORTED_Y,j=r&&c("RegExp",!O||I||d((function(){return L[m]=!1,y(x)!=x||y(L)==L||"/a/i"!=y(x,"i")})));if(j){var k=function(e,t){var a,r=this instanceof k,n=l(e),c=void 0===t;if(!r&&n&&e.constructor===k&&c)return e;O?n&&!c&&(e=e.source):e instanceof k&&(c&&(t=u.call(e)),e=e.source),I&&(a=!!t&&t.indexOf("y")>-1,a&&(t=t.replace(/y/g,"")));var s=i(O?new y(e,t):y(e,t),r?this:g,k);return I&&a&&p(s,{sticky:a}),s},w=function(e){e in k||s(k,e,{configurable:!0,get:function(){return y[e]},set:function(t){y[e]=t}})},E=o(y),T=0;while(E.length>T)w(E[T++]);g.constructor=k,k.prototype=g,h(n,"RegExp",k)}b("RegExp")},ae96:function(e,t,a){},c8d2:function(e,t,a){var r=a("d039"),n=a("5899"),c="​᠎";e.exports=function(e){return r((function(){return!!n[e]()||c[e]()!=c||n[e].name!==e}))}},ec53:function(e,t,a){"use strict";a("ae96")}}]);
//# sourceMappingURL=chunk-cf0f7ec2.b60f83ad.js.map